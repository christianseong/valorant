{"remainingRequest":"C:\\Users\\lol\\Desktop\\pressserver\\press\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\lol\\Desktop\\pressserver\\press\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\lol\\Desktop\\pressserver\\press\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\lol\\Desktop\\pressserver\\press\\src\\store\\modules\\api\\Auth.js","dependencies":[{"path":"C:\\Users\\lol\\Desktop\\pressserver\\press\\src\\store\\modules\\api\\Auth.js","mtime":1621912850125},{"path":"C:\\Users\\lol\\Desktop\\pressserver\\press\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1617667255123},{"path":"C:\\Users\\lol\\Desktop\\pressserver\\press\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1617667255123},{"path":"C:\\Users\\lol\\Desktop\\pressserver\\press\\node_modules\\babel-loader\\lib\\index.js","mtime":1617667255120},{"path":"C:\\Users\\lol\\Desktop\\pressserver\\press\\node_modules\\eslint-loader\\index.js","mtime":1617667259951}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHJvdXRlciBmcm9tICcuLi8uLi8uLi9yb3V0ZXInOwpheGlvcy5kZWZhdWx0cy5oZWFkZXJzWydQcmFnbWEnXSA9ICduby1jYWNoZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBzdGF0ZTogewogICAgbG9nZ2VkOiBmYWxzZSwKICAgIGFkbWluOiBmYWxzZQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBzZXRfbG9nZ2VkOiBmdW5jdGlvbiBzZXRfbG9nZ2VkKHN0YXRlLCBib29sKSB7CiAgICAgIHN0YXRlLmxvZ2dlZCA9IGJvb2w7CiAgICB9LAogICAgc2V0X2FkbWluOiBmdW5jdGlvbiBzZXRfYWRtaW4oc3RhdGUsIGJvb2wpIHsKICAgICAgc3RhdGUuYWRtaW4gPSBib29sOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgZ2V0X2F1dGhfY2hlY2s6IGZ1bmN0aW9uIGdldF9hdXRoX2NoZWNrKG0pIHsKICAgICAgYXhpb3MuZ2V0KCdhcGkvYXV0aC9jaGVjaycpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuZGF0YSA9PT0gJ25vdF9sb2dnZWQnKSB7CiAgICAgICAgICBtLmNvbW1pdCgnc2V0X2xvZ2dlZCcsIGZhbHNlKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmIChyZXMuZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICBtLmNvbW1pdCgnc2V0X2xvZ2dlZCcsIHRydWUpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHJlcy5kYXRhLmFkbWluKSBtLmNvbW1pdCgnc2V0X2FkbWluJywgdHJ1ZSk7CiAgICAgIH0pOwogICAgfSwKICAgIGdldF9hdXRoX2xvZ291dDogZnVuY3Rpb24gZ2V0X2F1dGhfbG9nb3V0KG0pIHsKICAgICAgYXhpb3MuZ2V0KCdhcGkvYXV0aC9sb2dvdXQnKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmRhdGEgPT09ICdsb2dnZWRfb3V0JykgewogICAgICAgICAgbS5jb21taXQoJ3NldF9sb2dnZWQnLCBmYWxzZSk7CiAgICAgICAgICBhbGVydCgn66Gc6re47JWE7JuDIOuQmOyXiOyKteuLiOuLpC4nKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHBvc3RfYXV0aF9sb2dpbjogZnVuY3Rpb24gcG9zdF9hdXRoX2xvZ2luKG0sIGlucHV0KSB7CiAgICAgIGF4aW9zLnBvc3QoJ2FwaS9hdXRoL2xvZ2luJywgewogICAgICAgIGlkOiBpbnB1dC5pZCwKICAgICAgICBwYXNzd29yZDogaW5wdXQucGFzc3dvcmQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5kYXRhID09PSAnYWxyZWFkeV9sb2dnZWRfaW4nKSB7CiAgICAgICAgICBhbGVydCgn7J2066+4IOuhnOq3uOyduCDrkJjslrTsnojsirXri4jri6QuJyk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAocmVzLmRhdGEgPT09ICdsb2dnZWRfaW4nKSB7CiAgICAgICAgICBtLmNvbW1pdCgnc2V0X2xvZ2dlZCcsIHRydWUpOwogICAgICAgICAgYWxlcnQoJ+uhnOq3uOyduCDrkJjsl4jsirXri4jri6QuJyk7CiAgICAgICAgICByb3V0ZXIucHVzaCgnL2FkbWluJyk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAocmVzLmRhdGEgPT09ICdub3RfcGFzc3dvcmQnKSB7CiAgICAgICAgICBhbGVydCgn67mE67CA67KI7Zi46rCAIO2LgOumveuLiOuLpC4nKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGFsZXJ0KCfslYTsnbTrlJTrpbwg64uk7IucIO2ZleyduO2VtOyjvOyEuOyalC4nKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBtb2R1bGVzOiB7fQp9Ow=="},{"version":3,"sources":["C:/Users/lol/Desktop/pressserver/press/src/store/modules/api/Auth.js"],"names":["axios","router","defaults","headers","state","logged","admin","mutations","set_logged","bool","set_admin","actions","get_auth_check","m","get","then","res","data","commit","success","get_auth_logout","alert","post_auth_login","input","post","id","password","push","modules"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AACAD,KAAK,CAACE,QAAN,CAAeC,OAAf,CAAuB,QAAvB,IAAmC,UAAnC;AACA,eAAe;AACXC,EAAAA,KAAK,EAAC;AACFC,IAAAA,MAAM,EAAC,KADL;AAEFC,IAAAA,KAAK,EAAC;AAFJ,GADK;AAKXC,EAAAA,SAAS,EAAC;AACNC,IAAAA,UADM,sBACKJ,KADL,EACWK,IADX,EACgB;AAClBL,MAAAA,KAAK,CAACC,MAAN,GAAeI,IAAf;AACH,KAHK;AAINC,IAAAA,SAJM,qBAIIN,KAJJ,EAIUK,IAJV,EAIe;AACjBL,MAAAA,KAAK,CAACE,KAAN,GAAcG,IAAd;AACH;AANK,GALC;AAaXE,EAAAA,OAAO,EAAC;AACJC,IAAAA,cADI,0BACWC,CADX,EACa;AACbb,MAAAA,KAAK,CAACc,GAAN,CAAU,gBAAV,EACCC,IADD,CACM,UAACC,GAAD,EAAO;AACT,YAAGA,GAAG,CAACC,IAAJ,KAAW,YAAd,EAA2B;AACvBJ,UAAAA,CAAC,CAACK,MAAF,CAAS,YAAT,EAAsB,KAAtB;AACA;AACH;;AACD,YAAGF,GAAG,CAACC,IAAJ,CAASE,OAAZ,EAAoB;AAChBN,UAAAA,CAAC,CAACK,MAAF,CAAS,YAAT,EAAsB,IAAtB;AACH;;AACD,YAAGF,GAAG,CAACC,IAAJ,CAASX,KAAZ,EAAmBO,CAAC,CAACK,MAAF,CAAS,WAAT,EAAqB,IAArB;AACtB,OAVD;AAWH,KAbG;AAcJE,IAAAA,eAdI,2BAcYP,CAdZ,EAcc;AACdb,MAAAA,KAAK,CAACc,GAAN,CAAU,iBAAV,EACCC,IADD,CACM,UAACC,GAAD,EAAO;AACT,YAAGA,GAAG,CAACC,IAAJ,KAAW,YAAd,EAA2B;AACvBJ,UAAAA,CAAC,CAACK,MAAF,CAAS,YAAT,EAAsB,KAAtB;AACAG,UAAAA,KAAK,CAAC,aAAD,CAAL;AACH;AACJ,OAND;AAOH,KAtBG;AAuBJC,IAAAA,eAvBI,2BAuBYT,CAvBZ,EAuBcU,KAvBd,EAuBoB;AACpBvB,MAAAA,KAAK,CAACwB,IAAN,CAAW,gBAAX,EAA4B;AACxBC,QAAAA,EAAE,EAACF,KAAK,CAACE,EADe;AAExBC,QAAAA,QAAQ,EAACH,KAAK,CAACG;AAFS,OAA5B,EAICX,IAJD,CAIM,UAACC,GAAD,EAAO;AACT,YAAGA,GAAG,CAACC,IAAJ,KAAW,mBAAd,EAAkC;AAC9BI,UAAAA,KAAK,CAAC,gBAAD,CAAL;AACA;AACH;;AACD,YAAGL,GAAG,CAACC,IAAJ,KAAW,WAAd,EAA0B;AACtBJ,UAAAA,CAAC,CAACK,MAAF,CAAS,YAAT,EAAsB,IAAtB;AACAG,UAAAA,KAAK,CAAC,YAAD,CAAL;AACApB,UAAAA,MAAM,CAAC0B,IAAP,CAAY,QAAZ;AACA;AACH;;AACD,YAAGX,GAAG,CAACC,IAAJ,KAAW,cAAd,EAA6B;AACzBI,UAAAA,KAAK,CAAC,aAAD,CAAL;AACA;AACH;;AACDA,QAAAA,KAAK,CAAC,iBAAD,CAAL;AACH,OApBD;AAqBH;AA7CG,GAbG;AA4DXO,EAAAA,OAAO,EAAC;AA5DG,CAAf","sourcesContent":["import axios from 'axios'\r\nimport router from '../../../router';\r\naxios.defaults.headers['Pragma'] = 'no-cache';\r\nexport default {\r\n    state:{\r\n        logged:false,\r\n        admin:false,\r\n    },\r\n    mutations:{\r\n        set_logged(state,bool){\r\n            state.logged = bool;\r\n        },\r\n        set_admin(state,bool){\r\n            state.admin = bool;\r\n        },\r\n    },\r\n    actions:{\r\n        get_auth_check(m){\r\n            axios.get('api/auth/check')\r\n            .then((res)=>{\r\n                if(res.data==='not_logged'){\r\n                    m.commit('set_logged',false);\r\n                    return;\r\n                }\r\n                if(res.data.success){\r\n                    m.commit('set_logged',true);\r\n                }\r\n                if(res.data.admin) m.commit('set_admin',true);\r\n            })\r\n        },\r\n        get_auth_logout(m){\r\n            axios.get('api/auth/logout')\r\n            .then((res)=>{\r\n                if(res.data==='logged_out'){\r\n                    m.commit('set_logged',false);\r\n                    alert('로그아웃 되었습니다.');\r\n                }\r\n            })\r\n        },\r\n        post_auth_login(m,input){\r\n            axios.post('api/auth/login',{\r\n                id:input.id,\r\n                password:input.password\r\n            })\r\n            .then((res)=>{\r\n                if(res.data==='already_logged_in'){\r\n                    alert('이미 로그인 되어있습니다.');\r\n                    return;\r\n                }\r\n                if(res.data==='logged_in'){\r\n                    m.commit('set_logged',true);\r\n                    alert('로그인 되었습니다.');\r\n                    router.push('/admin');\r\n                    return;\r\n                }\r\n                if(res.data==='not_password'){\r\n                    alert('비밀번호가 틀립니다.');\r\n                    return;\r\n                }\r\n                alert('아이디를 다시 확인해주세요.');\r\n            })\r\n        },\r\n    },\r\n    modules:{\r\n        \r\n    },\r\n}"]}]}